<!DOCTYPE html>

<html lang="en">
    <head>
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Genshin Calculator</title>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <meta name="description" content="" />
        
        <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
        
        <link href="https://cdn.jsdelivr.net/npm/modern-normalize@v2.0.0/modern-normalize.min.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

        <script src="https://cdn.jsdelivr.net/npm/mathjs@13.0.3/lib/browser/math.min.js"></script>
        
        <script src="Wish_Calculator_JS.mjs" type="text/javascript"></script>
        <script src="http://parsleyjs.org/dist/parsley.js"></script>
    </head>
    <body>
        <style>
            body, html {
              margin-left:5%;
              margin-right:5%;
              margin-bottom:5%;
              margin-top:5%;
            }

            body { 
              background-color: #137b85; 
            }

            .header {
              padding: 60px;
              text-align: center;
              background: #ADD8E6;
              color: white;
              font-size: 50px;
            }

            #LoadingSpinner {
              width: 50px;
              height: 50px;
              border: 3px solid rgba(255,255,255,.3);
              border-radius: 50%;
              border-top-color: #fff;
              animation: spin 1s ease-in-out infinite;
              -webkit-animation: spin 1s ease-in-out infinite;
            }

            @keyframes spin {
              to { -webkit-transform: rotate(360deg); }
            }
            @-webkit-keyframes spin {
              to { -webkit-transform: rotate(360deg); }
            }

            ul.parsley-errors-list {
              list-style-type: none;
              padding: 0;
              margin: 0;
              color: #800000;
            }
        </style>
      
        <div class="header">Genshin Wish And Gacha Calculator</div><br>

        <form id="form" data-parsley-validate="true">
            <div class="container">
                <div class="row">
                    <div class="col-sm">
                        <label for="Primos" class="form-label">Primogems</label><br>
                        <input type="number" id="Primos" class="form-control" data-parsley-trigger="change" data-parsley-required="true"><br>
                    </div>
                
                    <div class="col-sm">
                        <label for="Fates" class="form-label">IntertwinedFates</label><br>
                        <input type="number" id="Fates" class="form-control"><br>
                    </div>

                    <div class="col-sm">
                        <label for="Stardust" class="form-label">Masterless Stardust</label><br>
                        <input type="number" id="Stardust" class="form-control"><br>
                    </div>
                </div>
                <br>

                <label for="UsingStarglitter" class="form-label">Using Masterless Starglitter</label>
                <input type="checkbox" id="UsingStarglitter" class="form-check-input"><br>


                <div class="row" id="StarglitterSkipGroup" style="display: none;">
                    <div class="col-sm">
                        <label for="Starglitter" class="form-label">Masterless Starglitter</label><br>
                        <input type="number" id="Starglitter" class="form-control"><br>
                    </div>
                
                    <div class="col-sm">
                        <label for="MissingFourStars" class="form-label">Missing Four Star Characters</label><br>
                        <input type="number" id="MissingFourStars" class="form-control"><br>
                    </div>

                    <div class="col-sm">
                        <label for="MissingFiveStars" class="form-label">Missing Standard Banner Five Star Characters</label><br>
                        <input type="number" id="MissingFiveStars" class="form-control"><br>
                    </div>
                </div>
                <br>

                <center><h2>Spiral Abyss</h2></center>
                <center><h3>Expectected Stars:</h3></center>


                <div class="row">
                    <div class="col-sm">
                        <label for="F9" class="form-label">Floor 9</label><br>
                        <input type="number" id="F9" data-parsley-maxlength="9" max="9" data-parsley-trigger="change" class="form-control">
                    </div>
                
                    <div class="col-sm">
                        <label for="F10" class="form-label">Floor 10</label><br>
                        <input type="number" id="F10" class="form-control">
                    </div>

                    <div class="col-sm">
                        <label for="F11" class="form-label">Floor 11</label><br>
                        <input type="number" id="F11" class="form-control">
                    </div>

                    <div class="col-sm">
                        <label for="F12" class="form-label">Floor 12</label><br>
                        <input type="number" id="F12" class="form-control">
                    </div>
                </div>
                <br>

                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>
                <br>

                <label for="lastName" class="form-label">Last name:</label><br>
                <input type="text" class="form-control" name="lastName" value="Doe"><br>
                <label for="email" class="form-label">Email:</label><br>
                <input type="email" class="form-control" name="email" value="example@example.com"><br>
                <label for="phone" class="form-label">Phone:</label><br>
                <input type="tel" class="form-control" name="phone" value="555-555-5555"><br>
                <label for="company" class="form-label">Company:</label><br>
                <input type="text" class="form-control" name="company" value="XYZ Co."><br>
                <label for="industry" class="form-label">Industry:</label><br>
                <select class="form-select" name="industry">
                <option value="" selected disabled hidden>-- Select one --</option>
                <option value="industry 1">Industry 1</option>
                <option value="industry 2">Industry 2</option>
                <option value="industry 3">Industry 3</option>
                </select><br>
                <label for="message" class="form-label">Message:</label><br>
                <textarea class="form-control" name="message"></textarea><br>

                <center><a id="Calculate" class="btn btn-primary" style="border-width: 1px; border-color: black;"> Calculate </a></center><br>
            </div>
        </form>

        <div>
            <center>
                <div id="LoadingGroup" style="display: none;">
                    <div id="LoadingSpinner"></div>
                    <span id="LoadingText"></span>
                </div>

                <div id="ValidationWarning" style="display: none; color: #800000;">Please correct any invalid data.</div>
                
                <div id="WishEndDate" style="display: none;"></div>

                <div id="BannerEnded" style="display: none;"></div>

                <div id="MaxWishes" style="display: none;"></div>

                <div id="WishingGoals" style="display: none;"></div>

                <div id="Chance" style="display: none;"></div>
            </center>
        </div>

      <!-- <div class="accordion" id="accordionExample">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingOne">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
              Accordion Section Heading 1
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              Accordion Section Content 1
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingTwo">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
              Accordion Section Heading 2
            </button>
          </h2>
          <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              Accordion Section Content 2
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingThree">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
              Accordion Section Heading 3
            </button>
          </h2>
          <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              Accordion Section Content 3
            </div>
          </div>
        </div>
      </div>
      <table class="table">
        <tr>
          <td>Row 1, Column 1</td>
          <td>Row 1, Column 2</td>
          <td>Row 1, Column 3</td>
        </tr>
        <tr>
          <td>Row 2, Column 1</td>
          <td>Row 2, Column 2</td>
          <td>Row 2, Column 3</td>
        </tr>
      </table> -->

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script type="text/javascript">
            var ResultsLoaded = false;

            // TODO: Disable the button when clicked and reenable once its done processing.
            $("#Calculate").on('click', function() {
                $('#ValidationWarning').hide();
                
                $('input').change();
                
                if ($('.parsley-error').length != 0) {
                    $('#ValidationWarning').show();
                }
                else {
                    if (ResultsLoaded) {
                        $('#LoadingText').html('Recalculating...');
                    }
                    else{
                        $('#LoadingText').html('Loading...');
                    }

                    $('#LoadingGroup').show();

                    $(document).ready(function() {
                        WishCalcs(WishConfig.Matthew);

                        ResultsLoaded = true

                        $('#LoadingGroup').hide();
                    })
                }
            })

            $('#UsingStarglitter').on('change', function(){
                if ($('#UsingStarglitter').is(':checked')) {
                    $('#StarglitterSkipGroup').show();
                }
                else {
                    $('#StarglitterSkipGroup').hide();
                }
            });
        </script>
    </body>
</html>